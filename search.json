[{"title":"2019","url":"/2019/12/31/2019/","content":"\n# 2019想说的一些话  \n跨年了大家都应该很开心把><但是我好像对于这种情绪没有共鸣。一个是因为自己的水平实在太差了，还有就是担心挂科啊qwq，很想进vidar来着，但是我的行动并没有表现出这种想进的欲望，有句话是这么说的 \n> 当你真心想做一件事的时候，整个宇宙都会来帮忙  \n看目前的状况我应该是不想进了（并没有！  \n\n## 关于街舞\n其实一直都非常后悔，大一的时候完完全全没有解除任何技术相关内容，时间都花在跳舞上了（最后水了个负责人，也算是街舞社前辈眼里跳得不错的那一批）然后这学期的后半期决定不跳舞啦！想起之前考了FE的团甚至还教了1100的团费...而且popping课还是耗子老师来上的...  \n但是好像并没有把去练舞的这段时间利用起来qwq在街舞队里摸鱼继续摸鱼...看到其他的人一直在坚持跳舞很为他们开心！我就不跳啦！\n\n## 关于vidar\nqwq其实我属于二进宫了，大一的时候面试过一次然后就去跳舞了（我错了qwq  \n大二一开始认识了果子姐，因为个人非常胆小果子姐又非常温柔所以缠着果子姐面试了，果子姐又温柔又可爱啊><，后来宣讲会的时候认识了稳赚并且加了好友！wz真的非常有亲和力！而且性格是那种大哥（？的性格，但是其实长得很可爱><。  \n又因为一次偶然的机会，大概就是jqy上课没位置坐只能坐我旁边，然后我就开始问他是不是vidar的，就渐渐熟悉起来啦！后面就开始去协会自习（话说协会真的对我来说好神圣啊...并且眼熟了moesang，C老板，xyf，司大哥，茄子，Y姐姐。话说xyf学长第一次见我还给我棒棒糖了超级开心的qwq！这学期还和oyy同一节项目管理（仰望大佬）但是并没有搭话（感觉我个凡人不配。。。后来D3的时候我开始不要脸地问有没有需要帮忙的地方（暗示可以当工具人），然后就眼熟了幼稚园，zwt，matrix，mki，ash。其实并没有帮上什么忙，只是帮忙打了个车还提了个小零食...不过后面拿到d3周边超级开心！然而衣服选了XL码...是我太自信了...对了！还加入了wz粉丝团！但是解散了qwq，不过我永远都是izhuan！然后藉此认识了jqy的npy-wcy。  \nvidar有很厉害的新生（每年都有吧喂...）但是我就是一个零基础还没天赋的人qwq，而且还年纪大...hgame的时间越来越近，但是我却还是没有什么长进的样子...qwq对不起！\n\n## 关于学业\n这学期好多课都没听...(高数啦，线代啦，C语言啦，信号与系统啦，大物啦，C++啦...)好像是所有课都没听...因为从英专转专业过来的，所以这学期要补很多课qwq，C语言的大作业验收的时候还被老师批了...(C语言苦手...)，那为什么不选java呢，这个是因为呢，我很喜欢hgr老师hhhh,其实在C++课上超级自闭的...就我一个女的...而且我每次上机都是最后几个走的...每次都看见wcy和幼稚园几秒钟就走人了qwq然后一瞬间更加坚定了自己是废物的想法  \n总而言之呢就是好像会挂科的样子呢qwq\n\n## 关于病&药\n其实我没生病欸...但是每周要去一趟医院复诊然后开药qwq，还是瞒着家里的，所以生活费得抽出一部分来买药了...有一说一好贵qwq，现在钱也变成我焦虑的一部分了，不过看病挂专家号那是真的爽！对我来说很有效果，再坚持几个月估计就可以不喝药啦！不过也蛮神奇的，我一开始完全喝不下中药，到后面喝药跟喝白开水一样自然...还有医生说规律睡眠比睡眠时间更重要，我就把睡眠时间调到一点半啦!看诊的时候因为睡眠障碍科和心理健康科离的很近所以有一次很巧地碰上了来看心理的朋友，希望ta的病能快点好起来，不过好像现在状况不错！    \n关于情绪的问题，因为自身的原因非常地焦虑，然后就发展到了很偶尔的耳鸣+眼睛失焦（我觉得这个应该是看屏幕看多了...)的状况，我有时候一直在想，我是不是要去找医生，但是我觉得我还不至于...只是偶尔的犯懒而已，还是能敲会代码的! 但是这也引发了我的思考，我不敲代码是纯粹因为自制力差呢...还是因为...那我觉得还是自制力差的原因吧！   \n但是话说那种感觉真的没有能量了，可能动都不想动，晚上的时候到天台去吹吹风，坐到了墙沿上，六楼的高度也没啥好怕的，我以前一直以为自己恐高啥的，但是坐下去往下看的时候...感觉...也无所谓，风从下面吹上来，有一种可以飞起来的感觉  \n其实我挺羡慕双相的，起码up的时候可以能量超级加倍！虽然down的时候能量超级减倍了...  \n话说算是这个时期才真正体会到某一种情绪持续很久很久的感觉吧!  \n\n## 关于学习\nqwq两篇博客is all qwq dbq wtcl\n\n## 无\n还想写点什么，然后我又犯懒了，那就明年再见！","tags":["随笔"]},{"title":"uploads-lab","url":"/2019/12/30/uploads-lab/","content":"qwqqqqqq我觉得有空得再整理一下 \n \n## pass-01 客户端javascript检测\nchrome在elements中不能对javascript函数进行修改，所以在console中重写一遍在checkFile()判断条件中中加上.php\n## pass-02 MIME\n上传php文件，改包为允许后缀名  \npayloads:Content-Type: image/jpeg\n## pass-03 黑名单绕过\n上传php5后缀文件  \n黑名单绕过可以使用php的其他扩展名：pht，phpt，phtml，php3，php4，php5，php6等\n## pass-04 .htaccess\n上传.htaccess使jpg文件作为php文件解析\npayloads:\n```\n<FilesMatch \".(jpg)$\">\nSetHandler application/x-httpd-php\n</FilesMatch>\n```\n## pass-05 大小写绕过\n源码和04作了比较，05少了大小写转换，于是用Php后缀\n## pass-06 空格过滤\n文件后缀加入空格，在windows环境下，xx.jpg[空格] 或xx.jpg.这两类文件都是不允许存在的，若这样命名，windows会默认除去空格或点\n传入正常php文件后，改包后缀名+空格\n## pass-07 后缀加.\n没有deldot()，加点上传\n## pass-08 ::$DATA\n没有str_ireplace()，加::$DATA\n## pass-09\n```\n$img_path = UPLOAD_PATH.'/'.$file_name;\n```\n路径是经过处理的$file_name，根据函数执行顺序构造1.php. .\n## pass-10\n以1.php为例，上传后会文件名变为1.造成上传失败  \n可以改为1.php.php\n## pass-11 %00截断\n%00，0x00，/00本质相同  \n>截断原理:在url中%00表示ascll码中的0，而ascii中0作为特殊字符保留，表示字符串结束，所以当url中出现%00时就会认为读取已结束  \n\n上传路径改为1.php%00，上传文件改为.jpg后缀\n```\nsave_path=../upload/1.Php%00 HTTP/1.1\n```\n环境：php版本要小于5.3.4，5.3.4及以上已经修复该问题\nmagic_quotes_gpc需要为OFF状态\n## pass-12 0x00\n比较与11的代码，发现由GET转为POST  \n在POST中%00不会被url解码，在文件名后burpsuite添加二进制00  \n## pass-13 \n1. 源代码是检测前两个字节，winhex直接在图片后插入一句话木马  \n2. cmd  \n```\ncopy 1.jpg/b + test.php/a 2.jpg //1.jpg与test.php合并后生成2.jpg\n```\n参数 /b 指定以二进制格式复制、合并文件；用于图像类 / 声音类文件  \n参数 /a 指定以 ASCII 格式复制、合并文件。用于 txt 等文档类文件  \n.png .gif同理  \n\n## pass-14\n查了下getimagesize()，getimagesize()只检查了文件头，按照13的方法就可以通过  \n或者直接在代码的hex里加上一个图片的文件头就可以绕过检查\n## pass-15\n>函数定义：exif_imagetype() 读取一个图像的第一个字节并检查其签名。  \n按13方法处理，头部带有图像文件相同信息就可绕过\n## pass-16\n上传jpg文件，再将渲染过后的jpg文件与源jpg文件hex进行比较。在不变的部分插入php代码\n## pass-17 \n移动文件路径，判断后缀之后再删除，存在条件竞争  \n利用存放临时文件的时间即可访问上传文件  \n利用burp多线程发包，之后不断访问\n## pass-18\n>apache解析漏洞:Apache服务器在解析多后缀文件名的文件时，会从后往前辨别后缀，一直辨别到可以解析的后缀  \n白名单中的7z后缀并不被apache解析，所以上传1.php.7z\n## pass-19\n利用apache解析漏洞，保存名称改为1.php.7z\n## pass-20\n$file[0]=1.php/  \n$file[2]=jpg  \n此时$file[count($file) - 1]=$file[1]=\"\"为空  \n所以$file_name=1.php/.  \nmove_uploaded_file()会递归删除文件名最后的/.导致绕过了后缀名检测。\n[/.原理链接](http://wonderkun.cc/index.html/?p=626)\n","tags":["PHP","文件上传","wp"]},{"title":"php blog test","url":"/2019/12/23/php-blog-test/","content":"\nQAQ u1s1 花了好长时间(果然是个菜鸡)而且好多地方都没完善\nctrlc ctrlv一波带走\n以后继续完善！(咕咕咕)\n\n# web2\n主要有以下几个功能\n1. 用户登录登出\n2. 用户注册\n3. 用户留言\n4. 用户名与用户密码的更新\n\n链接：[web2](https://github.com/x9un/blog_test)\n\n# 主要思路\n1. 先建个数据库，2个表分别用来存储用户信息和留言板信息\n2. 建立文件用以链接数据库\n3. 写主页，主要能显示登录登出以及留言功能\n4. 登录后自动调转至user界面，可进行登出，留言与更新操作\n\n# 安全相关\n## htmlspecials()\n## 预防sql注入：使用PDO语句(以login.php为例)\n```\n$dsn=\"mysql:host=$mysrv;dbname=$mydb;\";\n$pdo=new PDO($dsn,$myuser,$mypwd);\n\nif(isset($username)&&isset($password))\n{//如果用户名和密码都不为空\n\n\n$sql = $pdo->prepare(\"select * from members where username = ? and password = ?\");\n$sql->execute(array($username,md5($password)));\nif ($sql->rowCount()) {\n        $_SESSION = $sql->fetch(PDO::FETCH_ASSOC);\n        header(\"Location:user.php\");\n```\n>PDO原理：在传入参数之前已经构建好了语法树，所以后期语法结构并不会被改变，传入的参数只会被当作参数看待  \n\n## 对密码进行了password_hash处理\n```\n\n$regpwd_hash=password_hash($regpwd,PASSWORD_BCRYPT);\n\n\t$regsql=$pdo->prepare(\"insert into members (username,password) values (?,?)\");\n\t$regsql->execute(array($reguser,$regpwd_hash));\n```\n在更新密码与注册时使用，而登录时则用password_verify()来验证密码  \n\n>若进行哈希算法如 MD5 或者 SHA ，执行速度非常快，这并不是我们想要的，我们需要对密码进行加盐处理，避免两个同样的密码产生相同的哈希值，新版PHP中自带了这一功能的函数  \n但是密码哈希并不是密码加密。哈希是将目标文本转换成具有相同长度的、不可逆的杂凑字符串，而加密是将目标文本转换成具有不同长度的、可逆的密文。他们之间最大的区别是可逆性，在储存密码时，我们需要不可逆的属性","tags":["PHP"]},{"title":"hello world","url":"/2019/12/20/hello-world/","content":">*hello world*\n话说是第一个站子耶...\n可是明明复制黏贴就能完成的东西我愣是搞了好几个小时QAQ\n那就希望自己越来越好"}]